<!DOCTYPE html>
<html lang="ru">
<head>
	<title>weather</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
	
	<meta charset="utf-8"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="referrer" content="no-referrer" />

	<link rel="shortcut icon" type="image/x-icon" href="res/favicons/favicon.ico"/>
	<link rel="mask-icon" sizes="any" href="res/favicons/mask-icon.svg" color="#f00"/>
	<link rel="icon" type="image/png" sizes="16x16" href="res/favicons/favicon-16x16.png"/>
	<link rel="icon" type="image/png" sizes="32x32" href="res/favicons/favicon-32x32.png"/>
	<link rel="icon" type="image/png" sizes="96x96" href="res/favicons/favicon-96x96.png"/>
	<link rel="apple-touch-icon" sizes="57x57" href="res/apple-touch-icon-57x57.png"/>
	<link rel="apple-touch-icon" sizes="60x60" href="res/favicons/apple-touch-icon-60x60.png"/>
	<link rel="apple-touch-icon" sizes="67x67" href="res/favicons/apple-touch-icon-76x76.png"/>
	<link rel="apple-touch-icon" sizes="72x72" href="res/favicons/apple-touch-icon-72x72.png"/>
	<link rel="apple-touch-icon" sizes="114x114" href="res/favicons/apple-touch-icon-114x114.png"/>
	<link rel="apple-touch-icon" sizes="120x120" href="res/favicons/apple-touch-icon-120x120.png"/>
	<link rel="apple-touch-icon" sizes="144x144" href="res/favicons/apple-touch-icon-144x144.png"/>
	<link rel="apple-touch-icon" sizes="152x152" href="res/favicons/apple-touch-icon-152x152.png"/>
	
	<link type="text/css" rel="stylesheet" href="https://romanlaptev.github.io/fonts/fonts-CDN.css">
	<link type="text/css" rel="stylesheet" href="css/lr.css">
	<link type="text/css" rel="stylesheet" href="css/custom.css">
<!--	
	<script src="../../js/jquery.min.js"></script>
-->	
	<script src="js/functions.js"></script>
	<script src="js/polyfills/classList.js"></script>
	<script src="js/polyfills/HTMLSelectElement.prototype.selectedOptions.js"></script>
	<script src="js/polyfills/dataset.js"></script>
	<script src="js/app.js"></script>
<!--[if lt IE 9]>
	<script src="js/fix_IE/html5shiv.js"></script>
	<script src="js/fix_IE/respond.min.js"></script>
<![endif]-->
</head>

<body class="bg-grey-green">
<div id="App" class="m-auto w80 h100 lr-radius-5">
	<div class="lr-panel h100">
		<div class="h100 bg-grey-green lr-radius-5">
			<div id="tab-weather" class="h100 tab-pane tab-active lr-panel bg-snow">
				<div class="tab-header p20 bg-darkblue-green lr-radius-5">
<h1 class="color-white text-right lr-font-comfortaa">данные погоды и прогноз</h1>
<h2 class="color-white text-right lr-font-comfortaa">OpenWeather API</h2>
					<div class="p20 _bg-lightsteelblue5 bg-grey-green color-black">
<!--
<form name="form_request_params">
-->
						<div class="lr-flex lr-flex-wrap _lr-row lr-flex-top">
					<div class="lr-float-left">
						<div class="p5">широта</div>
						<div class="p5">
<input id="latitude-input" type="text"
name="coord_lat" 
class="lr-form-control"
value="0" autocomplete="off" placeholder="">
						</div>
						<div class="lr-flex lr-flex-middle pt10">
<span>90&deg;</span>
<input id="latitude-range" type="range" 
class="range" min="-90" max="90" step="0.05" value="0" autocomplete="off">
<span>-90&deg;</span>
						</div>	
					</div>
					<div class="lr-float-left">
						<div class="p5">долгота</div>
						<div class="p5">
<input id="longitude-input" 
name="coord_long" 
class="lr-form-control"
type="text" value="-60" autocomplete="off" placeholder="">
						</div>
						<div class="lr-flex lr-flex-middle pt10">
<span>-180&deg;</span>
<input id="longitude-range" 
type="range" class="range" min="-180" max="180" step="0.05" value="60" autocomplete="off">
<span>180&deg;</span>
						</div>	
					</div>
				<div class="text-center p5 lr-float-left">
<div class="p5">получить координаты по адресу</div>
					<div class="p5">
<select name="address" id="select-addr" 
class="lr-form-control"
autocomplete="off">
	<option selected data-lat="0" data-lon="60">не выбрано</option>
	<option value="nsk" data-lat="55.038115899999994" data-lon="83.0094459">Новосибирск</option>
	<option value="okt" data-lat="55.169005" data-lon="83.160846">пос.Октябрьский</option>
</select>
					</div>
				</div>
				<div class="text-center p5 lr-float-left">
<div class="p5">параметры API</div>
					<div class="p5">
<select name="api-params" id="select-api" autocomplete="off" 
class="w80 lr-form-control">
	<option>не выбрано</option>
<!--
	<option data-source="yandex" data-type="weather">Яндекс.Погода</option>
-->
	<option data-source="openweathermap" data-type="weather">weather, openweathermap.org</option>
	<option data-source="openweathermap" data-type="forecast">5 day weather forecast, openweathermap.org</option>
</select>
					</div>
				</div>
			</div>
						<div class="pt40 pb20">
<!--
<input type="text" size="80" 
id="inp-url" class=""  autocomplete="off" 
value="http://api.openweathermap.org/data/2.5/weather"/>
<a href="?q=send-request&api-type=weather&api-object=yandex" 
class="send-request lr-btn bg-darkblue text-white">получить данные (yandex)</a>

<a href="?q=send-request&api-type=weather&api-object=openweathermap" 
class="lr-btn bg-darkblue text-white">get weather (openweathermap)</a>

<a href="?q=send-request&api-type=forecast&api-object=openweathermap" 
class="lr-btn bg-blue text-white">get weather forecast (openweathermap)</a>
-->
	<a href="?q=send-request&api-type={{api-type}}&api-object={{api-object}}" 
class="lr-btn-blue p20 btn-send-request color-white">получить данные</a>
			</div>			
<!--
</form>
-->
<!-- end form_request_params -->
					</div>
				</div><!-- end tab-header -->
				<div class=" p20 lr-radius-5">
					<div id="response-weather-api"></div>
				</div>
			</div><!-- end tab-weather -->

		</div><!-- end tab-content -->
	</div><!-- end panel -->
	
	<div class="log-panel pos-fixed-right-bottom p10 bg-lightsteelblue5">
		<div class="float-right">
			<a href="?q=toggle-log" title="Toggle log" class="lr-btn bg-white">-</a>
			<a href="?q=clear-log" title="Clear log" class="lr-btn bg-orange">x</a>
		</div>
		<div id="log" class="_p20"></div>
	</div>
</div><!-- end App container -->

<!--
<div class="">
	<button id="btn-scroll-to-top" 
class="lr-btn lr-btn-info scroll-to nolink" 
data-target="App">scroll to top</button>
</div>
-->
<footer class="lr-container">
	<div class="p10 _bg-grey-green">
		<div class="lr-panel bg-whitesmoke">
			<span id="block-copyright"></span>			
		</div>
	</div>
</footer>
<!--  wait window -->	
<div class="dm-overlay" id="modal-wait-window">
    <div class="dm-table">
		<div class="dm-cell">
			<div class="dm-modal">
				<p>please, wait...</p>
				<div class="loader loader2"></div>
				<div id="load-progress" class="mt10">
					<div class="">
						<span id="percent-complete"></span>
					</div>
					<div class="progress">
						<div id="load-progress-bar" class="determinate"></div>
					</div>
					<div>
Loaded <span id="num-loaded"></span> bytes 
<!-- 
of total <span id="num-total-load"></span>
( <span id="total-mb"></span> Mb) 
-->
					</div>
				</div>
			</div><!-- end dm-modal -->
		</div>
	</div>
</div>
<!-- ********************** TEMPLATES ************************** -->	
<script id="tpl-yandex--weather" type="text/template">
	<div class="lr-flex lr-flex-wrap lr-row">
		<div class="bg-lavender p20 lr-float-left">
			
<div class="lr-flex lr-flex-between lr-flex-v-top lr-flex-wrap _lr-row">
	<h3>погодные данные на <b>%fact.obs_time%</b></small></h3>
	<div class="_lr-float-right">
		<a href="%info.url%">Яндекс.Погода</a>
	</div>
</div>
<p class="m0">
	<b>%fact.season%</b>, <b>%fact.daytime%</b>
</p>
			<div class="lr-flex lr-flex-middle lr-flex-wrap">	
				<div class="_w50 text-center p20">
<img class="w50" src="https://yastatic.net/weather/i/icons/blueye/color/svg/%fact.icon%.svg"
onerror="this.onerror=console.log('error load '+this.src);this.src='img/%fact.icon%.png'"/>

<br>
<b>%fact.condition%</b>
				</div>
				<div class="_w50">
<p class="m0">
	<small>температура:</small> <b>%fact.temp%</b>°C, 
	<small>ощущается как:</small>: <b>%fact.feels_like%</b> &#8451;<br>
	<small>вода:</small> <b>%fact.temp_water%</b> °C
</p>
<p class="m0">
	<small>направление ветра:</small> <b>%fact.wind_dir%</b><br>  
	<small>скорость:</small>: <b>%fact.wind_speed%</b> м/с, 
	<small>порывы</small> <b>%fact.wind_gust%</b> м/с
</p>
<p class="m0">
	<small>Влажность воздуха:</small> <b>%fact.humidity%</b> %<br>  
	<small>давление:</small> <b>%fact.pressure_mm%</b> мм рт. ст.
</p>
				</div>
			</div>	
<p class="m0">
	<small>широта:</small> <b>%info.lat%</b>&deg;<br> 
	<small>долгота:</small> <b>%info.lon%</b>&deg;<br>
	<small>Время сервера: <b>%now%</b></small><br>
</p>
		</div>
		<div class="bg-lightgreen p20 lr-float-left">
<h3>данные прогноза погоды на %forecast.date_ts%</h3>
<p>восход: <b>%forecast.sunrise%</b>, закат: <b>%forecast.sunset%</b></p>
<!--
<p>Код фазы Луны: <b>%forecast.moon_code%</b></p>
-->
			<div class="lr-flex lr-flex-wrap lr-row">%parts%</div>
		</div>
	</div>
</script>
<script id="tpl-yandex--forecast-parts" type="text/template">
<div class="bg-aliceblue m10 p20 lr-float-left">
	<div>
		<b>%parts.daytime%</b>,
		<b>%parts.part_name%</b>
	</div>
<div class="lr-flex lr-flex-wrap">	
	<div class="text-center p20">
<img class="w50" src="https://yastatic.net/weather/i/icons/blueye/color/svg/%parts.icon%.svg"
onerror="this.onerror=console.log('error load '+this.src);this.src='img/%parts.icon%.png'"/>
<br>
<b>%parts.condition%</b>
	</div>
	<div>
<b>температура</b><br>
от <b>%parts.temp_min%</b> °C до <b>%parts.temp_max%</b> °C;
(<b>%parts.temp_avg%</b> °C)<br>
<small>ощущается как</small>: <b>%parts.feels_like%</b> °C<br>
<small>вода:</small>: <b>%parts.temp_water%</b> °C
	</div>
</div>	
<p class="m0">
	<small>направление ветра:</small> <b>%parts.wind_dir%</b><br> 
	<small>скорость:</small>: <b>%parts.wind_speed%</b> м/с, 
	<small>порывы</small> <b>%parts.wind_gust%</b> м/с
</p>
<p class="m0">
	<small>Влажность воздуха:</small> <b>%parts.humidity%</b> %<br>  
	<small>давление:</small> <b>%parts.pressure_mm%</b> мм рт. ст.
</p>
<p class="m0">
	<small>Прогноз осадков:</small> <b>%parts.prec_mm%</b> (мм)<br>  
<!--
	<li>prec_period: <b>%prec_period%</b>	<small>Прогнозируемый период осадков (в минутах). 	Число</small></li>
-->
	<small>Вероятность выпадения осадков:</small> <b>%parts.prec_prob%</b>
</p>

</div>
</script>
<!-- end forecast-parts -->
<!-- templates  openweathermap (weather) 
https://openweathermap.org/current
-->
<script id="tpl-openweathermap--weather" type="text/template">
<div class="bg-lightgreen p20">
	<h3 class="text-center">%sys.country%, %name%, погодные данные на <b>%dt%</b></h3>	
<div class="lr-flex lr-flex-wrap lr-flex-middle">	
	<div class="text-center p20">%weather%</div>
	<div class="p20">
<p class="m0">
<small>широта:</small> <b>%coord.lat%</b>, 
<small>долгота:</small> <b>%coord.lon%</b>
</p>
<p class="m0">
<b>температура</b>
<ul>
от <b>%main.temp_min%</b> &deg; до <b>%main.temp_max%</b> &deg;
	(<b>%main.temp%</b> &deg;)<br>
	<small>ощущается как</small>: <b>%main.feels_like%</b> &deg;
</ul>	
</p>
<p class="m0">давление: <b>%main.pressure%</b> hPa</p>
<p class="m0">влажность: <b>%main.humidity%</b> %</p>
<p class="m0">восход: <b>%sys.sunrise%</b>, закат: <b>%sys.sunset%</b></p>
<p class="m0">Облачность: <b>%clouds.all%</b>%</p>
	</div>
</div>
<!--
	<ul class="lr-list lr-list-disclosure bg-light-orange m20 p20">		
		<li>city name: <b>%name%</b></li>
		<li>city id: <b>%id%</b></li>
			<li>cod: <b>%cod%</b></li>
			<li>base: <b>%base%</b></li>
		<li>timezone: <b>%timezone%</b></li>
		<li>visibility: <b>%visibility%</b> meter</li>
	</ul>
-->
</div>		
</script>
<script id="tpl-openweathermap-weather-list" type="text/template">
<img src="http://openweathermap.org/img/w/%weather.icon%.png" 
	onerror="this.onerror=console.log('error load '+this.src);this.src='img/%weather.icon%.png'">
<br>
<b>%weather.main%,</b> <b>%weather.description%</b>
</script>
<!-- templates  openweathermap (forecast) 
https://openweathermap.org/forecast5#geo5
-->
<script id="tpl-openweathermap--forecast" type="text/template">
	<div class="m20">
		<h2>прогноз на 5 дней</h2>
	</div>
<!--
<p>
cod: <b>%cod%</b>, message: <b>%message%</b>
</p>
-->
	<div class="bg-whitesmoke m20 p20">
<p class="m0">
<b>%city.name%</b>, <b>%city.country%</b>, 
широта: <b>%city.coord.lat%</b>, 
долгота: <b>%city.coord.lon%</b>
</p>
<!--
			<li>city.population: <b>%city.population%</b></li>
-->
<p class="m0">
часовой пояс: <b>%city.timezone%</b>
</p>
<p class="m0">
восход: <b>%city.sunrise%</b>, 
закат: <b>%city.sunset%</b>
</p>
		<div class="lr-flex lr-flex-wrap lr-flex-middle lr-row">
%list%
		</div>
	</div>
</script>
<script id="tpl-openweathermap-forecast--list" type="text/template">
	<div class="bg-lavender m5 p20 lr-float-left">
<!-- <h3>record: %record_num%</h3> -->
<!-- <small>Time of data forecasted, ISO, UTC</small> -->
		<div class="lr-flex lr-flex-between lr-row">
			<div class="lr-float-left p20">
				<b>%list.dt%</b>, %list.sys.pod%
%weather%		
				<ul class="lr-list-unstyled">
<li class="">
	<small>температура</small>: <b>%list.main.temp%</b> &#8451;, 
	<small>ощущается как</small>: <b>%list.main.feels_like%</b> &#8451;
</li>
<li class="">
	<small>мин. т.</small>: <b>%list.main.temp_min%</b> &#8451;, 
	<small>макс. т.</small>: <b>%list.main.temp_max%</b> &#8451;
</li>
<li class="">
	<small>давление</small>: <b>%list.main.pressure%</b> hPa, <b>%list.main.grnd_level%</b> hPa
</li>
<li class=""><small>влажность</small>: <b>%list.main.humidity%</b>%</li>

<li class=""><small>средняя видимость</small>: 	<b>%list.visibility%</b> метров</li>
<li class="">
	<small>облачность</small>: <b>%list.clouds.all%</b>%, 
	<small>возможность осадков</small>: <b>%list.pop%</b>
</li>
<!--
<li class="">rain: 
	<small>Rain volume for last 3 hours (Объем дождя за последние 3 часа )</small>
	<b>%list.rain.3h%</b>mm
</li>
-->
<li class=""><h4 class="m0">ветер</h4> 
	<small>направление</small>: <b>%list.wind.deg%</b>&deg;, 
	<small>скорость</small>: <b>%list.wind.speed%</b> meter/sec
</li>
		</ul>
			</div>	
			<div class="text-center _w40 lr-float-left">
				<div class="lr-flex lr-row thermometer-wrapper">
					<div class="thermometer lr-float-left">
<div class="grad-fluid" 
style="height:%list.grad_fluid_height%px;
background-color:%list.grad_fluid_color%;"></div>
<div class="temp-feels-like" 
style="bottom:%list.temp_feels_like%px;"></div>
					</div>
					<div class="temp-scale lr-float-left">
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">50</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>		
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">40</div></div>		
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">30</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">20</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">10</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">0</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">-10</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">-20</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">-30</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">-40</div></div>
	<div class="grad-cell"><div class="grad-line short-line"></div><div class="grad-mark"></div></div>
	<div class="grad-cell"><div class="grad-line"></div><div class="grad-mark">-50</div></div>
					</div>
				</div>
			</div>
			
		</div>
		
	</div>
</script>
<script id="tpl-openweathermap-forecast--list-weather" type="text/template">
		<div class="">
<img src="http://openweathermap.org/img/w/%weather.icon%.png" 
onerror="this.onerror=console.log('error load '+this.src);this.src='img/%weather.icon%.png'">
<p class="m0"><b>%weather.description%</b></p>
		</div>
</script>

</body>
</html>
