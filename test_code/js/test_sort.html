<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, layout=1.0">
	<title>test SORT</title>
	<link rel="stylesheet" href="../css/bootstrap335.min.css">
</head>

<body>
	<div class="container">
	
		<div class="page-header">
			<h1>Test SORT, Intl.Collator</h1>
		</div>
	
		<div class="panel">
			<div class="panel-body">
<pre>
http://javascript.ru/array/sort
Справочник javascript: sort


https://learn.javascript.ru/array-methods


Intl: интернационализация в JavaScript 
https://learn.javascript.ru/intl


https://habrahabr.ru/post/253913/
API для интернационализации JavaScript: реализация в Firefox / Хабрахабр


http://theory.phphtml.net/javascript/string/localeCompare.html
Метод localeCompare - сравнение строк на JavaScript
</pre>

			</div>
		</div>
		
		<div class="panel">
			<div class="panel-body">
<pre id="code_out"></pre>
			</div>
		</div>
		
	</div><!-- end container -->
	
<script id="source">
	var items = ["c","b","d", "a" ];
	sort_string( items, "asc");
	
	//alphabetical sorting.
	function sort_string( sort_items, order ){
		//sort_items.sort();
		sort_items.sort(function (a, b){
console.log(a, b);
			switch(order){

				case "asc":
					if (a > b) {
						return 1;
					}
					if (a < b) {
						return -1;
					}
					// a === b
					return 0;
				break
				
				case "desc":
					if (a > b) {
						return -1;
					}
					if (a < b) {
						return 1;
					}
					// a === b
					return 0;
				break
				
			}
		});			
console.log( sort_items );  
	}//end sort_string()

	var code_out = document.getElementById("code_out");
	
	//print source code
	var source_txt = document.getElementById("source");
	//alert( source_txt.outerHTML );
	code_out.appendChild( document.createTextNode( source_txt.innerHTML ) );
	
</script>


<script id="src2">
/*
var names =
  ["Hochberg", "Hönigswald", "Holzman"];
 
var germanPhonebook = new Intl.Collator("de-DE-u-co-phonebk");
 
console.log(names.sort(germanPhonebook.compare).join(", "));
*/

var testLocales = Intl.Collator.supportedLocalesOf(["lv"], { usage: "sort" });
console.log( testLocales );
console.log( testLocales.length > 0 ? "collation supported": "collation not supported");

//var collator = new Intl.Collator();
//var collator = new Intl.Collator("lv");
//var collator = new Intl.Collator(["lv-LV"], { usage: "sort" });
var collator = new Intl.Collator("lv-LV-u-co-dict");

//test1
var test = [
//"ĀDAŽI-GARKALNE",
//"ĻAUDONA-MŪRNIEKI-STALIDZĀNI-GAIGALIEŠI",
//"ABAVCIEMS-VEĢI",
//"ŽĪGURI-SILACIEMS-KATLEŠI"
//"BALTINAVAS NOVADS, APŠOVA",
//"ĀDAŽU NOVADS, ALDERI",
//"AUCES NOVADS, VĪTIŅU PAGASTS, VĪTIŅI"
"B",
"Ā",
"A"
];

test.sort(function(a, b) {
	//return collator.compare(a, b);
	return a.localeCompare(b);
});
console.log( test );

//console.log(new Intl.Collator('de', {sensitivity: "base"} ).compare('ä', 'a'));
//console.log(new Intl.Collator("lv").compare('Ā', 'A'));
//console.log(new Intl.Collator("lv").compare('Ž', 'A'));

//test2
var str1 = "ĀDAŽU NOVADS, ALDERI";
var str2 = "AGLONAS NOVADS, AGLONAS PAGASTS, AGLONA";
var result = collator.compare(str1, str2);
console.log(result);

//test3
var table = [];
//var str1 = {"text" : "ĀDAŽU NOVADS, ALDERI"};
//var str2 = {"text" : "AUCES NOVADS, VĪTIŅU PAGASTS, VĪTIŅI"};

table.push({
	//"text" : "BALTINAVAS NOVADS, APŠOVA"
	"text" : "BA"
});
table.push({
	//"text" : "ĀDAŽU NOVADS"
	"text" : "ĀD"
});
table.push({
	//"text" : "AUCES NOVADS"
	"text" : "AU"
});

console.log(table);

var sortField = "text";
table.sort(function(a,b){
	var a_order = a[sortField];
	var b_order = b[sortField];
  /*
	var res = 0; // a === b
	if (a_order > b_order) {
		res = 1;
	}
	if (a_order < b_order) {
		res = -1;
	}
	*/
  var res = collator.compare(a_order, b_order);
  return res;
});
console.log(table);

var res = collator.compare("ĀD", "AU");
console.log(res);

var res = collator.compare("ĀD", "AD");
console.log(res);

</script>

</body>
</html>
