<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/bootstrap335.min.css">
	<title>Browser info</title>
<script>
var tests = [];

	if (!window.console){ 
		var test = {
			"name" : "console",
			"result" : false,
			"msg" : "Your browser does not support <b>console.log</b>"
		};
		tests.push(test);
		
		console = {
			log: function( msg ) {
//				//alert( msg );
//				document.getElementById("log").innerHTML += msg+"<br>";
			}
		};	
		
	};
//--------------------------------------
	
	var test = {
		"name" : "is mobile device",
		"result" : false
	};
	if ( navigator.userAgent.match(/Mobi/) ) {
		test["result"] = true;
		test["msg"] = "navigator.userAgent.match(/Mobi/) === true";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "touch supported",
		"result" : false
	};
	var supportsTouch = false;
	if (('ontouchstart' in window) || 
			window.DocumentTouch && document instanceof DocumentTouch) {
		test["result"] = true;
		test["msg"] = "'ontouchstart' in window === true //iOS & android";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "msPointerEnabled",
		"result" : false
	};
	if(window.navigator.msPointerEnabled) {
		test["result"] = true;
		test["msg"] = "window.navigator.msPointerEnabled === true //Windows 8";
	}
	tests.push(test);
//--------------------------------------
	var test = {
		"name" : "detect Microsoft mobile device",
		"result" : false
	};
	if( (navigator.maxTouchPoints > 0) || 
			(navigator.msMaxTouchPoints > 0) ){
		test["result"] = true;
		test["msg"] = "maxTouchPoints > 0 || msMaxTouchPoints > 0";
	}
	tests.push(test);
//--------------------------------------
	  
	  
	var test = {
		"name" : "addEventListener",
		"result" : false
	};
	if ( window.addEventListener ) {
		test["result"] = true;
		test["msg"] = "window.addEventListener supported in this browser";
	} else {
		test["msg"] = "window.addEventListener supported in this browser";
	};
	tests.push(test);
//--------------------------------------
	
	var test = {
		"name" : "attachEvent",
		"result" : false
	};
	if (window.attachEvent) {
		test["result"] = true;
		test["msg"] = "window.attachEvent supported in this browser";
	} else {
		test["msg"] = "window.attachEvent not supported...";
	};
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "document.querySelector",
		"result" : false
	};
	if (document.querySelector) {
		test["result"] = true;
		test["msg"] = "supported";
	} else {
		test["msg"] = "not supported...";
	};
	tests.push(test);
//--------------------------------------
	var test = {
		"name" : "window.ActiveXObject",
		"result" : false
	};
	if(window.ActiveXObject || "ActiveXObject" in window){
		test["result"] = true;
		test["msg"] = "supported";
console.log(window.ActiveXObject);
		test["links"]=[];
		test["links"].push(
			{
				"link" : "activexobject.html", 
				"text" : "activexobject.html"
			}		
		);
		test["links"].push(
			{
				"link" : "activexobject_2.html", 
				"text" : "activexobject_2.html"
			}		
		);

	}
	tests.push(test);
//--------------------------------------
	var test = {
		"name" : "window.DOMParser",
		"result" : false
	};
	if (window.DOMParser) { // all browsers, except IE before version 9
		test["result"] = true;
		test["msg"] = "supported";
//console.log(window.DOMParser);
	}
	tests.push(test);
//--------------------------------------
/*
	var test = {
		"name" : "XMLHttpRequest",
		"result" : false
	};
	if ( typeof window.XMLHttpRequest === "function"){ // Mozilla, Safari, Opera ...
		test["result"] = true;
		test["msg"] = "typeof window.XMLHttpRequest === 'function'";
	} 
	tests.push(test);
//--------------------------------------
*/

	var test = {
		"name" : "Worker",
		"result" : false
	};
	if (typeof window.Worker != "undefined"){
		test["result"] = true;
		test["links"]=[];
		test["links"].push(
			{
				"link" : "worker/test_background_calculations.html", 
				"text" : "test_background_calculations.html"
			}		
		);
		
	} else {
		test["msg"] = "Object Worker not supported";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Geolocation API",
		"result" : false
	};
	if( navigator.geolocation ) {
		test["result"] = true;
		test["msg"] = "<b>navigator.geolocation</b> supported in this browser";
		test["links"]=[];
		test["links"].push(
			{
				"link" : "geolocation.html", 
				"text" : "geolocation.html"
			}		
		);
	} else {
		test["msg"] = "<b>navigator.geolocation</b> not supported in this browser";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "File API",
		"result" : false
	};
	if( window.File && window.FileList && window.FileReader ) {
		test["result"] = true;
		test["msg"] = "Your browser support <b> window.File && window.FileList && window.FileReader</b>";
		test["links"]=[];
		test["links"].push(
			{
				"link" : "fileapi.html", 
				"text" : "fileapi.html"
			}		
		);
	} else {
		test["msg"] = "Your browser no supported <b> window.File && window.FileList && window.FileReader</b>";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "WebSocket",
		"result" : false
	};
	if('WebSocket' in window) {
		test["result"] = true;
	} else {
		test["msg"] = "This browser do not have support <b>WebSocket</b>.";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "localStorage",
		"result" : false
	};
	if( 'localStorage' in window && window['localStorage'] ){
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "sessionStorage",
		"result" : false
	};
	if( 'sessionStorage' in window && window['sessionStorage'] ){
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "indexedDB",
		"result" : false
	};
	
	//window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
	//if (!window.indexedDB) {
	var test_idb = "indexedDB" in window;
	if(!test_idb) {
		test["msg"] = "IndexedDB not supported, " + test_idb;
		test["msg"] += "<br>window.indexedDB = " + window.indexedDB;
		test["msg"] += "<br>window.mozIndexedDB = " + window.mozIndexedDB;
		test["msg"] += "<br>window.webkitIndexedDB = " + window.webkitIndexedDB;
		test["msg"] += "<br>window.msIndexedDB = " + window.msIndexedDB;
	} else {
		test["result"] = true;
		
		test["msg"] = "<br>window.indexedDB = " + window.indexedDB;
		test["msg"] += "<br>window.mozIndexedDB = " + window.mozIndexedDB;
		test["msg"] += "<br>window.webkitIndexedDB = " + window.webkitIndexedDB;
		test["msg"] += "<br>window.msIndexedDB = " + window.msIndexedDB;
		
		test["links"]=[];
		test["links"].push(
			{
				"link" : "webstorage/test_DB.html", 
				"text" : "test_DB.html"
			}		
		);
		test["links"].push(
			{
				"link" : "webstorage/test_indexeddb.html", 
				"text" : "test_indexeddb.html"
			}		
		);
		test["links"].push(
			{
				"link" : "webstorage/mobapp.database/test/test_mobapp_db.html", 
				"text" : "test_mobapp_db.html"
			}		
		);
		test["links"].push(
			{
				"link" : "webstorage/mobapp.database/test/test_idb.html", 
				"text" : "test_idb.html"
			}		
		);
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Web SQL database",
		"result" : false
	};
	if (window.openDatabase) {
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Application Cache API",
		"result" : false
	};
	if ( typeof window.applicationCache !== "undefined") {
		test["result"] = true;
		test["msg"] = "window.applicationCache is supported, " + window.applicationCache;
		
		test["links"]=[];
		test["links"].push(	{
				"link" : "appcache/test_appcache.html", 
				"text" : "test_appcache.html"
		});
		
	} else {
		test["msg"] = "window.applicationCache not supported, " + window.applicationCache;
	}
	
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Service Worker API",
		"result" : false
	};
	var result = 'serviceWorker' in navigator;
	if ( 'serviceWorker' in navigator) {
		test["result"] = true;
		test["msg"] = "serviceWorker is supported, " + result;
		test["msg"] += "<br>https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers ";
	} else {
		test["msg"] = "serviceWorker not supported, "  + result;
	}
	
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Server side events",
		"result" : false
	};
	if( typeof window.EventSource === "undefined"){
		test["msg"] = "No server-sent events support";
	} else {
		test["result"] = true;
console.log("window.EventSource = " + window.EventSource);
	};
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "JSON support",
		"result" : false
	};
	if (typeof JSON === 'object') {
		test["result"] = true;
	} else {
		test["msg"] = "typeof JSON :" + typeof JSON;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "isCanvasSupported",
		"result" : false
	};
	try {
		document.createElement("canvas").getContext("2d");
		test["result"] = true;
		test["msg"] = "HTML5 Canvas is supported in this browser";
		test["links"]=[];
		test["links"].push({"link" : "canvas/test_canvas.html", "text" : "test_canvas.html"});
		test["links"].push(
			{
				"link" : "canvas/graphics_curves.html", 
				"text" : "graphics_curves.html"
			}		
		);
	} catch (e) {
		test["msg"] = "HTML5 Canvas is not supported in this browser";
		test["msg"] += "<br> "+e.name+ ", "+e.message+ ", "+e.number;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "SVG support",
		"result" : false
	};
	if ( !!(document.createElementNS && 
			document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect) ) {
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "SVG in text/html",
		"result" : false
	};
	
	var e = document.createElement('div');
	e.innerHTML = '<svg></svg>';

	if ( !!(window.SVGSVGElement && 
			e.firstChild instanceof window.SVGSVGElement)	
	) {
		test["result"] = true;
	}

	test["links"]=[];
	test["links"].push(
		{
			"link" : "../html/svg/ex1.html", 
			"text" : "ex1.html"
		}		
	);
	test["links"].push(
		{
			"link" : "../html/svg/svg_samples.html", 
			"text" : "svg_samples.html"
		}		
	);
	
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Promise support",
		"result" : typeof window.Promise !== "undefined"
	};
	
	test["links"]=[];
	test["links"].push(
		{
			"link" : "test_promise.html", 
			"text" : "test_promise.html"
		}		
	);
	tests.push(test);
//--------------------------------------

window.onload = function(){
	var log = document.getElementById("log");
	
	var ua = document.getElementById("ua");
	var tpl = ua.innerHTML;
	var html = tpl
	.replace("{{userAgent}}", navigator.userAgent)
	.replace("{{product}}", navigator.product)
	.replace("{{appCodeName}}", navigator.appCodeName)
	.replace("{{appName}}", navigator.appName)
	.replace("{{appVersion}}", navigator.appVersion)
	.replace("{{appMinorVersion}}", navigator.appMinorVersion)
	.replace("{{cookieEnabled}}", navigator.cookieEnabled)
	.replace("{{language}}", navigator.language)
	.replace("{{systemLanguage}}", navigator.systemLanguage)
	.replace("{{userLanguage}}", navigator.userLanguage)
	.replace("{{onLine}}", navigator.onLine)
	.replace("{{platform}}", navigator.platform)
	.replace("{{cpuClass}}", navigator.cpuClass)
	.replace("{{oscpu}}", navigator.oscpu);
	ua.innerHTML = html;
	
		var msg = "navigator, raw output";	
		console.log(msg);	
		
		document.getElementById("log").innerHTML += msg+"<br>";
for( var item in navigator){
		var msg = item + " : "+ navigator[item];
console.log(msg);	
		document.getElementById("log").innerHTML += msg+"<br>";
}	

//console.log("navigator.plugins, raw output");	
//for( var item in navigator.plugins){
//console.log(item , navigator.plugins[item]);	
//}	

//console.log("navigator.mimeTypes, raw output");	
//for( var item in navigator["mimeTypes"]){
//console.log(item , navigator["mimeTypes"][item]);	
//}	

//console.log("window.XMLHttpRequest, raw output");	
//console.log(typeof window.XMLHttpRequest);	
//console.log(window.XMLHttpRequest.length);	
//for( var item in window.XMLHttpRequest){
//console.log(item + " : "+ window.XMLHttpRequest[item]);
//}	

//---------------------------------

	var test_tpl = document.getElementById("test-tpl").innerHTML;
//console.log( test_tpl);	
	var test_links_tpl = document.getElementById("test-links-tpl").innerHTML;
	var test_links_item_tpl = document.getElementById("test-links-item-tpl").innerHTML;

	var tests_out = document.getElementById("tests-out");
	var html = "";
	for (var n = 0; n < tests.length; n++){
		if( tests[n] ){
			var msg = tests[n]["msg"];
			if(!msg){
				var msg = "";
			}
			
			var test_links = "";
			if( tests[n]["links"] && tests[n]["links"].length > 0){
				var html_items = "";
				for( var n2 = 0; n2 < tests[n]["links"].length; n2++){
					html_items += test_links_item_tpl
					.replace("{{item-link}}", tests[n]["links"][n2]["link"])
					.replace("{{item-text}}", tests[n]["links"][n2]["text"]);
				};//next
				test_links = test_links_tpl.replace("{{links}}", html_items);
			}
			
			html += test_tpl
			.replace("{{name}}", tests[n]["name"])
			.replace("{{result}}", tests[n]["result"])
			.replace("{{msg}}", msg)
			.replace("{{test_links}}", test_links);
		}
	}//next
	tests_out.innerHTML = html;
};//end load



</script>


<style>
.log{
/*
position:absolute;
top:10px;
right:10px;
width:30%;
opacity:0.8;
padding:10px;
*/
background-color:#ffffcc;
border:1px dashed;
}
</style>
</head>

<body>
<div class="container">
	<div class="page-header">
		<h1>Browser info</h1>
	</div>
	
	<pre>
<a href="http://mybrowserinfo.com/">mybrowserinfo.com</a>
<a href="http://supportdetails.com/">supportdetails.com</a>
<a href="http://caniuse.com/">caniuse.com</a>, Can I use... Support tables for HTML5, CSS3, etc
<a href="http://diveintohtml5.info/everything.html">diveintohtml5.info</a>
	</pre>
	
	<div class="log panel" id="ua">
		<h3 class="text-center">navigator.userAgent: {{userAgent}}</h3>
		<ul>
<li>navigator.product: <b>{{product}}</b></b></li>
<li>navigator.appCodeName: <b>{{appCodeName}}</b></li>
<li>navigator.appName: <b>{{appName}}</b></li>
<li>navigator.appVersion: <b>{{appVersion}}</b></li>
<li>navigator.appMinorVersion: <b>{{appMinorVersion}}</b></li>
<li>navigator.cookieEnabled: <b>{{cookieEnabled}}</b></li>
<li>navigator.language: <b>{{language}}</b></li>
<li>navigator.systemLanguage: <b>{{systemLanguage}}</b></li>
<li>navigator.userLanguage: <b>{{userLanguage}}</b></li>
<li>navigator.onLine: <b>{{onLine}}</b></li>
<li>navigator.platform: <b>{{platform}}</b></li>
<li>navigator.cpuClass: <b>{{cpuClass}}</b></li>
<li>navigator.oscpu: <b>{{oscpu}}</b></li>
		</ul>
	</div>
	
	<div class="panel log">
		
		<div class="panel-body">
			<ul id="tests-out">
				<span id="test-tpl">
					<li class="panel-group">
<b>{{name}}</b> : <span class="text-info text-uppercase"><b>{{result}}</b></span> 
<div class="description">
	<small>{{msg}}</small>
</div>
{{test_links}}
					</li>
				</span>
			</ul>
		</div>
		
	</div>

	<div class="panel log">
		<div class="panel-body">
			<pre id="log"></pre>
		</div>
	</div>
	
</div><!-- end container -->

<!-- TEMPLATES -->
<script type="text/template" id="test-links-tpl">
	<ul class="form-control list-inline"><b>test pages</b>:
		{{links}}
	</ul>
</script>

<script type="text/template" id="test-links-item-tpl">
		<li>
			<a href='{{item-link}}'>{{item-text}}</a>
		</li>	
</script>

</body>
</html>
