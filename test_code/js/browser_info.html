<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/bootstrap335.min.css">
	<title>Browser info</title>
<script>
var tests = [];

	if (!window.console){ 
		
		console = {
			log: function( message ) {
				//alert( message );
				document.getElementById("log").innerHTML += message+"<br>";
			}
		};	
		
		var test = {
			"name" : "console",
			"result" : false,
			"message" : "Your browser does not support <b>console.log</b>"
		};
		tests.push(test);
	};
//--------------------------------------

	var test = {
		"name" : "addEventListener",
		"result" : false
	};
	if ( window.addEventListener ) {
		test["result"] = true;
		test["message"] = "window.addEventListener supported in this browser";
	} else {
		test["message"] = "window.addEventListener supported in this browser";
	};
	tests.push(test);
//--------------------------------------
	
	var test = {
		"name" : "attachEvent",
		"result" : false
	};
	if (window.attachEvent) {
		test["result"] = true;
		test["message"] = "window.attachEvent supported in this browser";
	} else {
		test["message"] = "window.attachEvent not supported...";
	};
//--------------------------------------

	var test = {
		"name" : "document.querySelector",
		"result" : false
	};
	if (document.querySelector) {
		test["result"] = true;
		test["message"] = "supported";
	} else {
		test["message"] = "not supported...";
	};
	tests.push(test);
//--------------------------------------
	var test = {
		"name" : "window.ActiveXObject",
		"result" : false
	};
	if(window.ActiveXObject || "ActiveXObject" in window){
		test["result"] = true;
		test["message"] = "supported";
console.log(window.ActiveXObject);
	}
	tests.push(test);
//--------------------------------------
	var test = {
		"name" : "window.DOMParser",
		"result" : false
	};
	if (window.DOMParser) { // all browsers, except IE before version 9
		test["result"] = true;
		test["message"] = "supported";
console.log(window.DOMParser);
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Geolocation API",
		"result" : false
	};
	if( navigator.geolocation ) {
		test["result"] = true;
		test["message"] = "<b>navigator.geolocation</b> supported in this browser";
	} else {
		test["message"] = "<b>navigator.geolocation</b> not supported in this browser";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "File API",
		"result" : false
	};
	if( window.File && window.FileList && window.FileReader ) {
		test["result"] = true;
		test["message"] = "Your browser support <b> window.File && window.FileList && window.FileReader</b>";
	} else {
		test["message"] = "Your browser no supported <b> window.File && window.FileList && window.FileReader</b>";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "WebSocket",
		"result" : false
	};
	if('WebSocket' in window) {
		test["result"] = true;
	} else {
		test["message"] = "This browser do not have support <b>WebSocket</b>.";
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "localStorage",
		"result" : false
	};
	if( 'localStorage' in window && window['localStorage'] ){
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "indexedDB",
		"result" : false
	};
	window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
	if (!window.indexedDB) {
		test["message"] = "IndexedDB not supported";
	} else {
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

	var test = {
		"name" : "Web SQL database",
		"result" : false
	};
	if (window.openDatabase) {
		test["result"] = true;
	}
	tests.push(test);
//--------------------------------------

console.log(tests);	

window.onload = function(){
	var log = document.getElementById("log");
	if (!window.console){ 
		console = {
			log: function( message ) {
				//alert( message );
				document.getElementById("log").innerHTML += message+"<br>";
			}
		};	
	};
	
	var ua = document.getElementById("ua");
	var tpl = ua.innerHTML;
	var html = tpl
	.replace("{{userAgent}}", navigator.userAgent)
	.replace("{{product}}", navigator.product)
	.replace("{{appCodeName}}", navigator.appCodeName)
	.replace("{{appName}}", navigator.appName)
	.replace("{{appVersion}}", navigator.appVersion)
	.replace("{{cookieEnabled}}", navigator.cookieEnabled)
	.replace("{{language}}", navigator.language)
	.replace("{{onLine}}", navigator.onLine)
	.replace("{{platform}}", navigator.platform)
	.replace("{{oscpu}}", navigator.oscpu);
	ua.innerHTML = html;
	
for( var item in navigator){
console.log(item , navigator[item]);	
}	
//---------------------------------

	var test_tpl = document.getElementById("test-tpl").innerHTML;
//console.log( test_tpl);	
	var tests_out = document.getElementById("tests-out");
	var html = "";
	for (var n = 0; n < tests.length; n++){
		if( tests[n] ){
			var message = tests[n]["message"];
			if(!message){
				var message = "";
			}
			
			html += test_tpl
			.replace("{{name}}", tests[n]["name"])
			.replace("{{result}}", tests[n]["result"])
			.replace("{{message}}", message);
		}
	}//next
	tests_out.innerHTML = html;
}//end load

</script>


<style>
.log{
/*
position:absolute;
top:10px;
right:10px;
width:30%;
opacity:0.8;
padding:10px;
*/
background-color:#ffffcc;
border:1px dashed;
}
</style>
</head>

<body>
<div class="container">
	<div class="page-heading">
		<h1>Browser info</h1>
	</div>
	
	<pre>
<a href="http://caniuse.com/">caniuse.com</a>, Can I use... Support tables for HTML5, CSS3, etc
	</pre>
	
	<div class="log panel" id="ua">
		<h3 class="text-center">navigator.userAgent: {{userAgent}}</h3>
		<ul>
<li>navigator.product: {{product}}</li>
<li>navigator.appCodeName: {{appCodeName}}</li>
<li>navigator.appName: {{appName}}</li>
<li>navigator.appVersion: {{appVersion}}</li>
<li>navigator.cookieEnabled: {{cookieEnabled}}</li>
<li>navigator.language: {{language}}</li>
<li>navigator.onLine: {{onLine}}</li>
<li>navigator.platform: {{platform}}</li>
<li>navigator.oscpu: {{oscpu}}</li>
		</ul>
	</div>
	
	<div class="panel log">
		
		<div class="panel-body">
			<ul id="tests-out">
				<span id="test-tpl">
					<li>
<b>{{name}}</b> : <span class="text-info text-uppercase"><b>{{result}}</b></span> 
<p><small>{{message}}</small></p>
					</li>
				</span>
			</ul>
		</div>
		
	</div>

	<div class="panel log">
		<div class="panel-body">
			<pre id="log"></pre>
		</div>
	</div>
	
</div><!-- end container -->
	
</body>
</html>